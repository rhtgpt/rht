CREATE TABLE GD.CPI_OPM_SMG3_LOGGING (
  TRACE_ID              VARCHAR2(36 BYTE),
  ALIAS                 VARCHAR2(16 BYTE),
  AUDIT_CREATE_DATE     TIMESTAMP(6) DEFAULT SYSTIMESTAMP,
  SMG3_LOGGING_DATA     CLOB,
  FILTRATION_JSON_DATA  CLOB,

  -- LOB physical attributes must live here (column level) for HASH-subpartitioned tables
  LOB (SMG3_LOGGING_DATA) STORE AS SECUREFILE (
    ENABLE STORAGE IN ROW
    CHUNK 8192
    RETENTION
    COMPRESS HIGH
    NOCACHE
  ),
  LOB (FILTRATION_JSON_DATA) STORE AS SECUREFILE (
    ENABLE STORAGE IN ROW
    CHUNK 8192
    RETENTION
    NOCACHE
    NOLOGGING
  )
)
PARTITION BY RANGE (AUDIT_CREATE_DATE)
  INTERVAL (NUMTODSINTERVAL(1, 'DAY'))
SUBPARTITION BY HASH (TRACE_ID)
SUBPARTITION TEMPLATE (
  SUBPARTITION sp1 TABLESPACE GD_DATA_01,
  SUBPARTITION sp2 TABLESPACE GD_DATA_02
)
(
  PARTITION p_seed VALUES LESS THAN (TIMESTAMP '2025-06-17 00:00:00')
    COMPRESS FOR OLTP
    (
      SUBPARTITION p_seed_sp1 TABLESPACE GD_DATA_01,
      SUBPARTITION p_seed_sp2 TABLESPACE GD_DATA_02
    )
)
ENABLE ROW MOVEMENT;
