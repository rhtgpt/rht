CREATE TABLE GD.CIM_OFM_SMG3_LOGGING (
    TRACE_ID               VARCHAR2(36 BYTE),
    ALIAS                  VARCHAR2(16 BYTE),
    AUDIT_CREATE_DATE      TIMESTAMP(6) DEFAULT SYSTIMESTAMP,
    SMG3_LOGGING_DATA      CLOB,
    FILTRATION_JSON_DATA   CLOB
)
PARTITION BY RANGE (AUDIT_CREATE_DATE)
  INTERVAL (NUMTODSINTERVAL(1, 'DAY'))
SUBPARTITION BY LIST (MOD(ORA_HASH(TRACE_ID), 4))  -- Use hash for uniform distribution
SUBPARTITION TEMPLATE (
    SUBPARTITION sp_0 VALUES (0)
      LOB (SMG3_LOGGING_DATA) STORE AS smg3_lob_sp0 (TABLESPACE GD_LOB_01),
      LOB (FILTRATION_JSON_DATA) STORE AS filter_lob_sp0 (TABLESPACE GD_LOB_01),

    SUBPARTITION sp_1 VALUES (1)
      LOB (SMG3_LOGGING_DATA) STORE AS smg3_lob_sp1 (TABLESPACE GD_LOB_02),
      LOB (FILTRATION_JSON_DATA) STORE AS filter_lob_sp1 (TABLESPACE GD_LOB_02),

    SUBPARTITION sp_2 VALUES (2)
      LOB (SMG3_LOGGING_DATA) STORE AS smg3_lob_sp2 (TABLESPACE GD_LOB_03),
      LOB (FILTRATION_JSON_DATA) STORE AS filter_lob_sp2 (TABLESPACE GD_LOB_03),

    SUBPARTITION sp_3 VALUES (3)
      LOB (SMG3_LOGGING_DATA) STORE AS smg3_lob_sp3 (TABLESPACE GD_LOB_04),
      LOB (FILTRATION_JSON_DATA) STORE AS filter_lob_sp3 (TABLESPACE GD_LOB_04)
)
(
    PARTITION p_seed VALUES LESS THAN (TIMESTAMP '2025-01-01 00:00:00')
)
ENABLE ROW MOVEMENT;
