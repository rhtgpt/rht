CREATE TABLE txns (
  txn_id              NUMBER,
  region              VARCHAR2(10),
  txn_date            DATE NOT NULL,
  amount              NUMBER,
  txn_details         CLOB,
  txn_payload         CLOB,
  CONSTRAINT pk_txns PRIMARY KEY (txn_id)
)
PARTITION BY RANGE (txn_date)
  INTERVAL (NUMTODSINTERVAL(1,'DAY'))
SUBPARTITION BY LIST (region)
SUBPARTITION TEMPLATE (
  SUBPARTITION r_asia VALUES ('ASIA')
    LOB (txn_details) STORE AS lob_txn_details_asia (TABLESPACE GD_LOB_04),
    LOB (txn_payload) STORE AS lob_txn_payload_asia (TABLESPACE GD_LOB_03),

  SUBPARTITION r_eu VALUES ('EU')
    LOB (txn_details) STORE AS lob_txn_details_eu (TABLESPACE GD_LOB_04),
    LOB (txn_payload) STORE AS lob_txn_payload_eu (TABLESPACE GD_LOB_03),

  SUBPARTITION r_us VALUES ('US')
    LOB (txn_details) STORE AS lob_txn_details_us (TABLESPACE GD_LOB_04),
    LOB (txn_payload) STORE AS lob_txn_payload_us (TABLESPACE GD_LOB_03),

  SUBPARTITION r_other VALUES (DEFAULT)
    LOB (txn_details) STORE AS lob_txn_details_other (TABLESPACE GD_LOB_04),
    LOB (txn_payload) STORE AS lob_txn_payload_other (TABLESPACE GD_LOB_03)
)
(
  PARTITION p_seed VALUES LESS THAN (DATE '2025-01-01')
)
ENABLE ROW MOVEMENT;
