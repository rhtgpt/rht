CREATE TABLE GD.CPI_OPM_SMG3_LOGGING_NEW (
    TRACE_ID              VARCHAR2(36 BYTE),
    ALIAS                 VARCHAR2(16 BYTE),
    AUDIT_CREATE_DATE     TIMESTAMP(6) DEFAULT SYSTIMESTAMP,
    SMG3_LOGGING_DATA     CLOB,
    FILTRATION_JSON_DATA  CLOB
)
PARTITION BY RANGE (AUDIT_CREATE_DATE)
SUBPARTITION BY LIST (MOD(ORA_HASH(TRACE_ID), 3)) 
SUBPARTITION TEMPLATE (
    SUBPARTITION sp0 VALUES (0)
        LOB (SMG3_LOGGING_DATA) STORE AS (TABLESPACE GD_LOB_05),
        LOB (FILTRATION_JSON_DATA) STORE AS (TABLESPACE GD_LOB_05),
    SUBPARTITION sp1 VALUES (1)
        LOB (SMG3_LOGGING_DATA) STORE AS (TABLESPACE GD_LOB_06),
        LOB (FILTRATION_JSON_DATA) STORE AS (TABLESPACE GD_LOB_06),
    SUBPARTITION sp2 VALUES (2)
        LOB (SMG3_LOGGING_DATA) STORE AS (TABLESPACE GD_LOB_07),
        LOB (FILTRATION_JSON_DATA) STORE AS (TABLESPACE GD_LOB_07)    
)
INTERVAL (NUMTODSINTERVAL(1, 'DAY'))
(
    PARTITION p0 VALUES LESS THAN (TIMESTAMP '2025-06-17 00:00:00')
    COMPRESS FOR OLTP
)
ENABLE ROW MOVEMENT;


CREATE TABLE PRODUCT (
    PRODUCT_ID       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_NAME     VARCHAR2(100) NOT NULL,
    DESCRIPTION      VARCHAR2(500),
    CATEGORY         VARCHAR2(50),
    PRICE            NUMBER(10, 2) NOT NULL,
    STOCK_QUANTITY   NUMBER DEFAULT 0,
    CREATED_AT       TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT       TIMESTAMP
);

