CREATE TABLE "GD"."CIM_OFM_SMG3_LOGGING" (
    TRACE_ID              VARCHAR2(36 BYTE),
    ALIAS                 VARCHAR2(16 BYTE),
    AUDIT_CREATE_DATE     TIMESTAMP(6) DEFAULT SYSTIMESTAMP,
    TRACE_HASH            GENERATED ALWAYS AS (MOD(ORA_HASH(TRACE_ID), 2)) VIRTUAL,
    SMG3_LOGGING_DATA     CLOB,
    FILTRATION_JSON_DATA  CLOB
)
PARTITION BY RANGE (AUDIT_CREATE_DATE)
  INTERVAL (NUMTODSINTERVAL(1,'DAY'))
SUBPARTITION BY LIST (TRACE_HASH)
SUBPARTITION TEMPLATE (
  SUBPARTITION sp0 VALUES (0)
    LOB (SMG3_LOGGING_DATA) STORE AS smg3_logging_data_1 (
        TABLESPACE GD_LOB_05
        ENABLE STORAGE IN ROW
        CHUNK 8192
        RETENTION
        NOCACHE
    )
    LOB (FILTRATION_JSON_DATA) STORE AS smg3_logging_data_2 (
        TABLESPACE GD_LOB_06
        ENABLE STORAGE IN ROW
        CHUNK 8192
        RETENTION
        NOCACHE
    ),
    
  SUBPARTITION sp1 VALUES (1)
    LOB (SMG3_LOGGING_DATA) STORE AS smg3_logging_data_3 (
        TABLESPACE GD_LOB_05
        ENABLE STORAGE IN ROW
        CHUNK 8192
        RETENTION
        NOCACHE
    )
    LOB (FILTRATION_JSON_DATA) STORE AS smg3_logging_data_4 (
        TABLESPACE GD_LOB_06
        ENABLE STORAGE IN ROW
        CHUNK 8192
        RETENTION
        NOCACHE
    )
)
(
  PARTITION p_seed VALUES LESS THAN (DATE '2025-01-01')
)
ENABLE ROW MOVEMENT;
