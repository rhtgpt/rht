<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: TO_ServiceArea_Validation_v3_svg_fixed Pages: 1 -->
<svg width="1940pt" height="695pt"
 viewBox="0.00 0.00 1940.00 695.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 691)">
<title>TO_ServiceArea_Validation_v3_svg_fixed</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-691 1936,-691 1936,4 -4,4"/>
<!-- A -->
<g id="node1" class="node">
<title>A</title>
<path fill="white" stroke="black" d="M845.5,-687C845.5,-687 704.5,-687 704.5,-687 698.5,-687 692.5,-681 692.5,-675 692.5,-675 692.5,-646 692.5,-646 692.5,-640 698.5,-634 704.5,-634 704.5,-634 845.5,-634 845.5,-634 851.5,-634 857.5,-640 857.5,-646 857.5,-646 857.5,-675 857.5,-675 857.5,-681 851.5,-687 845.5,-687"/>
<text text-anchor="middle" x="775" y="-671.8" font-family="Arial" font-size="14.00">Start</text>
<text text-anchor="middle" x="775" y="-656.8" font-family="Arial" font-size="14.00">Subscribe to Kafka topic</text>
<text text-anchor="middle" x="775" y="-641.8" font-family="Arial" font-size="14.00">(service_area_snapshot)</text>
</g>
<!-- B -->
<g id="node2" class="node">
<title>B</title>
<path fill="white" stroke="black" d="M916,-597C916,-597 634,-597 634,-597 628,-597 622,-591 622,-585 622,-585 622,-573 622,-573 622,-567 628,-561 634,-561 634,-561 916,-561 916,-561 922,-561 928,-567 928,-573 928,-573 928,-585 928,-585 928,-591 922,-597 916,-597"/>
<text text-anchor="middle" x="775" y="-575.3" font-family="Arial" font-size="14.00">Receive &amp; validate Service Area Kafka message</text>
</g>
<!-- A&#45;&gt;B -->
<g id="edge1" class="edge">
<title>A&#45;&gt;B</title>
<path fill="none" stroke="black" d="M775,-633.91C775,-625.48 775,-616.08 775,-607.52"/>
<polygon fill="black" stroke="black" points="778.5,-607.26 775,-597.26 771.5,-607.26 778.5,-607.26"/>
</g>
<!-- C -->
<g id="node3" class="node">
<title>C</title>
<path fill="white" stroke="black" d="M923,-524C923,-524 627,-524 627,-524 621,-524 615,-518 615,-512 615,-512 615,-483 615,-483 615,-477 621,-471 627,-471 627,-471 923,-471 923,-471 929,-471 935,-477 935,-483 935,-483 935,-512 935,-512 935,-518 929,-524 923,-524"/>
<text text-anchor="middle" x="775" y="-508.8" font-family="Arial" font-size="14.00">Query TOM DB for Transfer Orders</text>
<text text-anchor="middle" x="775" y="-493.8" font-family="Arial" font-size="14.00">(status=OPEN, lineStatus=CREATED,</text>
<text text-anchor="middle" x="775" y="-478.8" font-family="Arial" font-size="14.00">type!=&#39;CT&#39;, destination=event.destination_location)</text>
</g>
<!-- B&#45;&gt;C -->
<g id="edge2" class="edge">
<title>B&#45;&gt;C</title>
<path fill="none" stroke="black" d="M775,-560.75C775,-552.99 775,-543.51 775,-534.32"/>
<polygon fill="black" stroke="black" points="778.5,-534.18 775,-524.18 771.5,-534.18 778.5,-534.18"/>
</g>
<!-- D -->
<g id="node4" class="node">
<title>D</title>
<path fill="white" stroke="black" d="M888,-434C888,-434 662,-434 662,-434 656,-434 650,-428 650,-422 650,-422 650,-408 650,-408 650,-402 656,-396 662,-396 662,-396 888,-396 888,-396 894,-396 900,-402 900,-408 900,-408 900,-422 900,-422 900,-428 894,-434 888,-434"/>
<text text-anchor="middle" x="775" y="-418.8" font-family="Arial" font-size="14.00">Compare TO.origin with</text>
<text text-anchor="middle" x="775" y="-403.8" font-family="Arial" font-size="14.00">Kafka message.servicingNodes.origins</text>
</g>
<!-- C&#45;&gt;D -->
<g id="edge3" class="edge">
<title>C&#45;&gt;D</title>
<path fill="none" stroke="black" d="M775,-470.59C775,-462.31 775,-453.11 775,-444.65"/>
<polygon fill="black" stroke="black" points="778.5,-444.47 775,-434.47 771.5,-444.47 778.5,-444.47"/>
</g>
<!-- N1 -->
<g id="node5" class="node">
<title>N1</title>
<path fill="white" stroke="black" d="M212.17,-356.99C212.17,-356.99 11.83,-323.01 11.83,-323.01 5.92,-322 5.92,-320 11.83,-318.99 11.83,-318.99 212.17,-285.01 212.17,-285.01 218.08,-284 229.92,-284 235.83,-285.01 235.83,-285.01 436.17,-318.99 436.17,-318.99 442.08,-320 442.08,-322 436.17,-323.01 436.17,-323.01 235.83,-356.99 235.83,-356.99 229.92,-358 218.08,-358 212.17,-356.99"/>
<text text-anchor="middle" x="224" y="-324.8" font-family="Arial" font-size="14.00">No itemOverrides[] AND</text>
<text text-anchor="middle" x="224" y="-309.8" font-family="Arial" font-size="14.00">TO.origin NOT in servicingNodes?</text>
</g>
<!-- D&#45;&gt;N1 -->
<g id="edge4" class="edge">
<title>D&#45;&gt;N1</title>
<path fill="none" stroke="black" d="M667.13,-395.99C574.23,-380.48 440.32,-358.12 344.05,-342.04"/>
<polygon fill="black" stroke="black" points="344.41,-338.56 333.97,-340.36 343.26,-345.46 344.41,-338.56"/>
</g>
<!-- N2 -->
<g id="node7" class="node">
<title>N2</title>
<path fill="white" stroke="black" d="M648.22,-356.69C648.22,-356.69 477.78,-323.31 477.78,-323.31 471.89,-322.15 471.89,-319.85 477.78,-318.69 477.78,-318.69 648.22,-285.31 648.22,-285.31 654.11,-284.15 665.89,-284.15 671.78,-285.31 671.78,-285.31 842.22,-318.69 842.22,-318.69 848.11,-319.85 848.11,-322.15 842.22,-323.31 842.22,-323.31 671.78,-356.69 671.78,-356.69 665.89,-357.85 654.11,-357.85 648.22,-356.69"/>
<text text-anchor="middle" x="660" y="-324.8" font-family="Arial" font-size="14.00">No itemOverrides[] AND</text>
<text text-anchor="middle" x="660" y="-309.8" font-family="Arial" font-size="14.00">TO.origin IN servicingNodes?</text>
</g>
<!-- D&#45;&gt;N2 -->
<g id="edge6" class="edge">
<title>D&#45;&gt;N2</title>
<path fill="none" stroke="black" d="M752.28,-395.82C738.78,-385.02 721.18,-370.94 704.98,-357.98"/>
<polygon fill="black" stroke="black" points="707.15,-355.24 697.16,-351.73 702.78,-360.71 707.15,-355.24"/>
</g>
<!-- O1 -->
<g id="node9" class="node">
<title>O1</title>
<path fill="white" stroke="black" d="M1084.17,-356.99C1084.17,-356.99 883.83,-323.01 883.83,-323.01 877.92,-322 877.92,-320 883.83,-318.99 883.83,-318.99 1084.17,-285.01 1084.17,-285.01 1090.08,-284 1101.92,-284 1107.83,-285.01 1107.83,-285.01 1308.17,-318.99 1308.17,-318.99 1314.08,-320 1314.08,-322 1308.17,-323.01 1308.17,-323.01 1107.83,-356.99 1107.83,-356.99 1101.92,-358 1090.08,-358 1084.17,-356.99"/>
<text text-anchor="middle" x="1096" y="-324.8" font-family="Arial" font-size="14.00">itemOverrides[] present AND</text>
<text text-anchor="middle" x="1096" y="-309.8" font-family="Arial" font-size="14.00">TO.origin NOT in servicingNodes?</text>
</g>
<!-- D&#45;&gt;O1 -->
<g id="edge8" class="edge">
<title>D&#45;&gt;O1</title>
<path fill="none" stroke="black" d="M838.04,-395.93C885.65,-382.29 951.68,-363.36 1005.01,-348.08"/>
<polygon fill="black" stroke="black" points="1006.17,-351.39 1014.82,-345.27 1004.24,-344.66 1006.17,-351.39"/>
</g>
<!-- O2 -->
<g id="node11" class="node">
<title>O2</title>
<path fill="white" stroke="black" d="M1520.22,-356.69C1520.22,-356.69 1349.78,-323.31 1349.78,-323.31 1343.89,-322.15 1343.89,-319.85 1349.78,-318.69 1349.78,-318.69 1520.22,-285.31 1520.22,-285.31 1526.11,-284.15 1537.89,-284.15 1543.78,-285.31 1543.78,-285.31 1714.22,-318.69 1714.22,-318.69 1720.11,-319.85 1720.11,-322.15 1714.22,-323.31 1714.22,-323.31 1543.78,-356.69 1543.78,-356.69 1537.89,-357.85 1526.11,-357.85 1520.22,-356.69"/>
<text text-anchor="middle" x="1532" y="-324.8" font-family="Arial" font-size="14.00">itemOverrides[] present AND</text>
<text text-anchor="middle" x="1532" y="-309.8" font-family="Arial" font-size="14.00">TO.origin IN servicingNodes?</text>
</g>
<!-- D&#45;&gt;O2 -->
<g id="edge10" class="edge">
<title>D&#45;&gt;O2</title>
<path fill="none" stroke="black" d="M900.21,-404.49C1012.72,-395.26 1182.32,-379.61 1329,-359 1361.33,-354.46 1396.37,-348.46 1428.09,-342.62"/>
<polygon fill="black" stroke="black" points="1429.07,-346 1438.27,-340.73 1427.8,-339.11 1429.07,-346"/>
</g>
<!-- N1A -->
<g id="node6" class="node">
<title>N1A</title>
<path fill="white" stroke="black" d="M341,-246C341,-246 107,-246 107,-246 101,-246 95,-240 95,-234 95,-234 95,-205 95,-205 95,-199 101,-193 107,-193 107,-193 341,-193 341,-193 347,-193 353,-199 353,-205 353,-205 353,-234 353,-234 353,-240 347,-246 341,-246"/>
<text text-anchor="middle" x="224" y="-230.8" font-family="Arial" font-size="14.00">Cancel entire TO</text>
<text text-anchor="middle" x="224" y="-215.8" font-family="Arial" font-size="14.00">Reason: ORIGIN_NOT_SERVICEABLE</text>
<text text-anchor="middle" x="224" y="-200.8" font-family="Arial" font-size="14.00">Publish TO_CANCELLED</text>
</g>
<!-- N1&#45;&gt;N1A -->
<g id="edge5" class="edge">
<title>N1&#45;&gt;N1A</title>
<path fill="none" stroke="black" d="M224,-282.95C224,-274.23 224,-264.95 224,-256.29"/>
<polygon fill="black" stroke="black" points="227.5,-256.1 224,-246.1 220.5,-256.1 227.5,-256.1"/>
</g>
<!-- N2A -->
<g id="node8" class="node">
<title>N2A</title>
<path fill="white" stroke="black" d="M711.5,-238.5C711.5,-238.5 608.5,-238.5 608.5,-238.5 602.5,-238.5 596.5,-232.5 596.5,-226.5 596.5,-226.5 596.5,-212.5 596.5,-212.5 596.5,-206.5 602.5,-200.5 608.5,-200.5 608.5,-200.5 711.5,-200.5 711.5,-200.5 717.5,-200.5 723.5,-206.5 723.5,-212.5 723.5,-212.5 723.5,-226.5 723.5,-226.5 723.5,-232.5 717.5,-238.5 711.5,-238.5"/>
<text text-anchor="middle" x="660" y="-223.3" font-family="Arial" font-size="14.00">TO valid</text>
<text text-anchor="middle" x="660" y="-208.3" font-family="Arial" font-size="14.00">No action required</text>
</g>
<!-- N2&#45;&gt;N2A -->
<g id="edge7" class="edge">
<title>N2&#45;&gt;N2A</title>
<path fill="none" stroke="black" d="M660,-282.95C660,-271.6 660,-259.3 660,-248.64"/>
<polygon fill="black" stroke="black" points="663.5,-248.62 660,-238.62 656.5,-248.62 663.5,-248.62"/>
</g>
<!-- O1A -->
<g id="node10" class="node">
<title>O1A</title>
<path fill="white" stroke="black" d="M1170.5,-238.5C1170.5,-238.5 1021.5,-238.5 1021.5,-238.5 1015.5,-238.5 1009.5,-232.5 1009.5,-226.5 1009.5,-226.5 1009.5,-212.5 1009.5,-212.5 1009.5,-206.5 1015.5,-200.5 1021.5,-200.5 1021.5,-200.5 1170.5,-200.5 1170.5,-200.5 1176.5,-200.5 1182.5,-206.5 1182.5,-212.5 1182.5,-212.5 1182.5,-226.5 1182.5,-226.5 1182.5,-232.5 1176.5,-238.5 1170.5,-238.5"/>
<text text-anchor="middle" x="1096" y="-223.3" font-family="Arial" font-size="14.00">Cancel entire TO</text>
<text text-anchor="middle" x="1096" y="-208.3" font-family="Arial" font-size="14.00">Publish TO_CANCELLED</text>
</g>
<!-- O1&#45;&gt;O1A -->
<g id="edge9" class="edge">
<title>O1&#45;&gt;O1A</title>
<path fill="none" stroke="black" d="M1096,-282.95C1096,-271.6 1096,-259.3 1096,-248.64"/>
<polygon fill="black" stroke="black" points="1099.5,-248.62 1096,-238.62 1092.5,-248.62 1099.5,-248.62"/>
</g>
<!-- I1 -->
<g id="node12" class="node">
<title>I1</title>
<path fill="white" stroke="black" d="M1520.04,-236.55C1520.04,-236.55 1317.74,-220.45 1317.74,-220.45 1311.76,-219.98 1311.76,-219.02 1317.74,-218.55 1317.74,-218.55 1520.04,-202.45 1520.04,-202.45 1526.02,-201.98 1537.98,-201.98 1543.96,-202.45 1543.96,-202.45 1746.26,-218.55 1746.26,-218.55 1752.24,-219.02 1752.24,-219.98 1746.26,-220.45 1746.26,-220.45 1543.96,-236.55 1543.96,-236.55 1537.98,-237.02 1526.02,-237.02 1520.04,-236.55"/>
<text text-anchor="middle" x="1532" y="-215.8" font-family="Arial" font-size="14.00">Any invalid items per itemOverrides[]?</text>
</g>
<!-- O2&#45;&gt;I1 -->
<g id="edge11" class="edge">
<title>O2&#45;&gt;I1</title>
<path fill="none" stroke="black" d="M1532,-282.95C1532,-271.26 1532,-258.58 1532,-247.71"/>
<polygon fill="black" stroke="black" points="1535.5,-247.55 1532,-237.55 1528.5,-247.55 1535.5,-247.55"/>
</g>
<!-- I1A -->
<g id="node13" class="node">
<title>I1A</title>
<path fill="white" stroke="black" d="M1522,-142C1522,-142 1408,-142 1408,-142 1402,-142 1396,-136 1396,-130 1396,-130 1396,-116 1396,-116 1396,-110 1402,-104 1408,-104 1408,-104 1522,-104 1522,-104 1528,-104 1534,-110 1534,-116 1534,-116 1534,-130 1534,-130 1534,-136 1528,-142 1522,-142"/>
<text text-anchor="middle" x="1465" y="-126.8" font-family="Arial" font-size="14.00">No → All items valid</text>
<text text-anchor="middle" x="1465" y="-111.8" font-family="Arial" font-size="14.00">No action required</text>
</g>
<!-- I1&#45;&gt;I1A -->
<g id="edge12" class="edge">
<title>I1&#45;&gt;I1A</title>
<path fill="none" stroke="black" d="M1520.33,-202.04C1510.24,-187.81 1495.47,-166.98 1483.73,-150.42"/>
<polygon fill="black" stroke="black" points="1486.55,-148.34 1477.91,-142.21 1480.84,-152.39 1486.55,-148.34"/>
<text text-anchor="middle" x="1510" y="-163.8" font-family="Arial" font-size="14.00">No</text>
</g>
<!-- I2 -->
<g id="node14" class="node">
<title>I2</title>
<path fill="white" stroke="black" d="M1679.1,-139.45C1679.1,-139.45 1564.31,-124.55 1564.31,-124.55 1558.36,-123.77 1558.36,-122.23 1564.31,-121.45 1564.31,-121.45 1679.1,-106.55 1679.1,-106.55 1685.05,-105.77 1696.95,-105.77 1702.9,-106.55 1702.9,-106.55 1817.69,-121.45 1817.69,-121.45 1823.64,-122.23 1823.64,-123.77 1817.69,-124.55 1817.69,-124.55 1702.9,-139.45 1702.9,-139.45 1696.95,-140.23 1685.05,-140.23 1679.1,-139.45"/>
<text text-anchor="middle" x="1691" y="-119.3" font-family="Arial" font-size="14.00">Are ALL items invalid?</text>
</g>
<!-- I1&#45;&gt;I2 -->
<g id="edge13" class="edge">
<title>I1&#45;&gt;I2</title>
<path fill="none" stroke="black" d="M1557.55,-203.32C1584.99,-187 1628.68,-161.04 1658.54,-143.29"/>
<polygon fill="black" stroke="black" points="1660.53,-146.18 1667.33,-138.07 1656.95,-140.17 1660.53,-146.18"/>
<text text-anchor="middle" x="1642.5" y="-163.8" font-family="Arial" font-size="14.00">Yes</text>
</g>
<!-- I2A -->
<g id="node15" class="node">
<title>I2A</title>
<path fill="white" stroke="black" d="M1649.5,-45.5C1649.5,-45.5 1500.5,-45.5 1500.5,-45.5 1494.5,-45.5 1488.5,-39.5 1488.5,-33.5 1488.5,-33.5 1488.5,-19.5 1488.5,-19.5 1488.5,-13.5 1494.5,-7.5 1500.5,-7.5 1500.5,-7.5 1649.5,-7.5 1649.5,-7.5 1655.5,-7.5 1661.5,-13.5 1661.5,-19.5 1661.5,-19.5 1661.5,-33.5 1661.5,-33.5 1661.5,-39.5 1655.5,-45.5 1649.5,-45.5"/>
<text text-anchor="middle" x="1575" y="-30.3" font-family="Arial" font-size="14.00">Yes → Cancel entire TO</text>
<text text-anchor="middle" x="1575" y="-15.3" font-family="Arial" font-size="14.00">Publish TO_CANCELLED</text>
</g>
<!-- I2&#45;&gt;I2A -->
<g id="edge14" class="edge">
<title>I2&#45;&gt;I2A</title>
<path fill="none" stroke="black" d="M1672.88,-107.23C1654.79,-92.5 1626.69,-69.61 1605.23,-52.13"/>
<polygon fill="black" stroke="black" points="1607.33,-49.32 1597.37,-45.72 1602.91,-54.75 1607.33,-49.32"/>
<text text-anchor="middle" x="1658.5" y="-74.8" font-family="Arial" font-size="14.00">Yes</text>
</g>
<!-- I2B -->
<g id="node16" class="node">
<title>I2B</title>
<path fill="white" stroke="black" d="M1920,-53C1920,-53 1692,-53 1692,-53 1686,-53 1680,-47 1680,-41 1680,-41 1680,-12 1680,-12 1680,-6 1686,0 1692,0 1692,0 1920,0 1920,0 1926,0 1932,-6 1932,-12 1932,-12 1932,-41 1932,-41 1932,-47 1926,-53 1920,-53"/>
<text text-anchor="middle" x="1806" y="-37.8" font-family="Arial" font-size="14.00">No → Cancel only impacted items</text>
<text text-anchor="middle" x="1806" y="-22.8" font-family="Arial" font-size="14.00">Update TO &amp; mark items CANCELLED</text>
<text text-anchor="middle" x="1806" y="-7.8" font-family="Arial" font-size="14.00">Publish TO_UPDATE</text>
</g>
<!-- I2&#45;&gt;I2B -->
<g id="edge15" class="edge">
<title>I2&#45;&gt;I2B</title>
<path fill="none" stroke="black" d="M1708.97,-107.23C1724.4,-94.55 1747.2,-75.81 1766.83,-59.69"/>
<polygon fill="black" stroke="black" points="1769.22,-62.25 1774.73,-53.2 1764.78,-56.84 1769.22,-62.25"/>
<text text-anchor="middle" x="1761" y="-74.8" font-family="Arial" font-size="14.00">No</text>
</g>
</g>
</svg>
